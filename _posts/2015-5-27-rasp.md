---
layout: post
title: Des tuiles sur la Pi !
---

Je vais installer sur ma petite Raspberry un petit server de tuiles.

[Une petite video tuto pour voir comment ca marche un serveur de tuiles](https://www.youtube.com/watch?v=CwAQSKsSQhI)

[Le repo de Tobin Bradley sur github](https://github.com/tobinbradley/mbtiles-server)


##Tout d'abord il faut installer Node Js !

*Node Js c'est bien! Mais qu'est ce que c'est difficile à installer: Les versions évoluent tellement vite que les softwares qui utilisent d'anciennes versions ne marchent plus avec les nouvelles versions (c'est le cas de Tilemill par ex).

Il faut donc choisir une version qui n'est pas trop récente mais qui n'est pas trop vieille non plus sinon NPM n'est pas intégré. On va donc installer la version 0.10.35 puisqu'elle supporte Tilemill et puisqu'il il y a npm dedans !*



Installer Node 0.10.35 from sources:

```

cd /home/pi

mkdir node

cd node

wget http://nodejs.org/dist/v0.10.35/node-v0.10.35.tar.gz

tar -zxf node-v0.10.35.tar.gz

cd node-v0.10.35/


```



Avant de compiler node from source on va installer *screen*

Cela evitera que le processus se stop en cas de *broken ssh pipe*

```

sudo apt-get install screen

screen

```


Dans le nouveau terminal on lance alors l'installation (Attention ca va prendre une à deux heures !):

```

./configure

make

sudo make install

```

Voila, s'est lancé on allez faire un tour dehors !



Qu'est ce qu'il nous reste à faire ?

Donc le workflow serait:

Collecter / Stocker les données dans ODK

Exporter les données en csv sur github -> Utilser Koop pour creer un service REST pour creer nos maps et dashboards avec ces données.

Generer les fond de cartes d'analyse dans Tilemill (enfin de l'analyse !!), pousser les mbtiles sur Github, les recupere sur la Pi et les diffuser avec ce petit server de tuiles.

Yallah !
